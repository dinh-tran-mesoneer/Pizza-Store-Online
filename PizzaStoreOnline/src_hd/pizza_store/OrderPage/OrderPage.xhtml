<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>
	<ui:composition template="/layouts/basic.xhtml">
		<ui:define name="title">OrderPage</ui:define>
		<ui:define name="content">
			<div class="page-header">
				<h1>Pizza Hut Company</h1>
			</div>

			<p:tabView>
				<p:tab title="Choose Pizza">
					<h:form id="pizzaForm">
						<p:dataGrid
							value="#{data.orderData.listSelectedPizzaOrderItem}"
							var="orderItem"
							columns="4"
							layout="grid"
							rows="8"
							paginator="true"
							id="pizzaDatagrid">

							<div class="panel panel-primary">
								<div class="panel-heading">
									<h1 class="panel-title">#{orderItem.pizza.name}</h1>
								</div>
								<div class="panel panel-default">
									<div class="text-center">
										<img
											src="#{orderItem.pizza.imageLink}"
											alt="#{orderItem.pizza.name}"
											style="max-width: 20em; max-height: 20em;" />
									</div>

									<h3 class="text-center">$#{orderItem.pizza.price}</h3>

									<div class="text-center">
										<p:commandButton
											styleClass="btn btn-primary"
											value="Add"
											update="j_id_h:customerInfoForm:ordersSummary"
											actionListener="#{logic.addPizza(orderItem.pizza.id)}"
											id="addPizza" />
									</div>
								</div>
							</div>
						</p:dataGrid>
					</h:form>>
				</p:tab>

				<p:tab title="Choose Drinks">
					<h:form id="drinkForm">
						<p:dataGrid
							value="#{data.orderData.listSelectedDrinkOrderItem}"
							var="orderItem"
							columns="4"
							layout="grid"
							rows="8"
							paginator="true"
							id="drinksDatagrid">

								<div class="panel panel-primary">
									<div class="panel-heading">
										<h1 class="panel-title">#{orderItem.drink.name}</h1>
									</div>
									<div class="panel panel-default">
										<div class="text-center">
											<img src="#{orderItem.drink.imageLink}" alt="#{orderItem.drink.name}"
												style="max-width: 20em; max-height: 20em;" />
										</div>

										<h3 class="text-center">$#{orderItem.drink.price}</h3>

										<div class="text-center">
											<p:commandButton
												styleClass="btn btn-primary"
												value="Add"
												update="j_id_h:customerInfoForm:ordersSummary"
												actionListener="#{logic.addDrink(orderItem.drink.id)}"
												id="addDrink" />
										</div>
									</div>
								</div>
							</p:dataGrid>
					</h:form>>
				</p:tab>

				<p:tab title="Pay and Delivery">
					<h:form id="customerInfoForm">
						<div class="container-fluid">
							<div class="row">
								<div class="col-md-2">
									<p:outputLabel value="Name" for="Name" />
								</div>
								<div class="col-md-8">
									<p:inputText
										value="#{data.orderData.name}"
										id="Name"
										required="true"
										style="width: 40em;"/>
								</div>
							</div>

							<div class="row">
								<div class="col-md-2">
									<p:outputLabel value="Phone Number" for="PhoneNumber" />
								</div>
								<div class="col-md-8">
									<p:inputText
										value="#{data.orderData.phoneNumber}"
										id="PhoneNumber"
										required="true"
										style="width: 40em;"/>
								</div>
							</div>

							<div class="row">
								<div class="col-md-2">
									<p:outputLabel
										value="Delivery To"
										for="DeliveryAddress" />
								</div>
								<div class="col-md-8">
									<p:inputText
										value="#{data.orderData.deliveryAddress}"
										id="DeliveryAddress"
										required="true"
										style="width: 40em;"/>
								</div>
							</div>
							
							<div class="row">
							<p:panel id="ordersSummary">
								<table class="table table-striped">
								    <thead>
								      <tr>
								        <th>Item</th>
								        <th>Quantity</th>
								        <th>Price</th>
								      </tr>
								    </thead>
								    <tbody>
									<ui:repeat value="#{data.orderData.listSelectedPizzaOrderItem}" var="pizzaOrderItem">
										<tr style="#{pizzaOrderItem.isSelected ? '' : 'display: none;'}">
									        <td>#{pizzaOrderItem.pizza.name}</td>
									        <td>#{pizzaOrderItem.quantity}</td>
									        <td>$#{pizzaOrderItem.quantity * pizzaOrderItem.pizza.price}</td>
								      	</tr>
									</ui:repeat>
									<ui:repeat value="#{data.orderData.listSelectedDrinkOrderItem}" var="drinkOrderItem">
										<tr style="#{drinkOrderItem.isSelected ? '' : 'display: none;'}">
									        <td>#{drinkOrderItem.drink.name}</td>
									        <td>#{drinkOrderItem.quantity}</td>
									        <td>$#{drinkOrderItem.quantity * drinkOrderItem.drink.price}</td>
								      	</tr>
									</ui:repeat>
								    </tbody>
								  </table>
								  </p:panel>
							</div>

							<div class="text-center">
								<input
								type="submit"
								id="Submit"
								value="Order Now"
								class="btn btn-danger"
								jsf:actionListener="#{logic.addOrder}" />
							</div>
						</div>
					</h:form>
				</p:tab>
			</p:tabView>
		</ui:define>
	</ui:composition>

	<script src="#{resource['js/jquery-1.11.0.js']}"></script>
	<script src="#{resource['js/bootstrap-3.1.1.js']}"></script>
</h:body>
</html>